import unittest
import json
import os, sys
import logging.config
CURRENT_DIR = os.path.dirname(os.path.realpath(__file__))

sys.path.append(os.path.join(os.path.dirname(__file__), "../"))
from helper.config import Config
from parse.parsing import Parse


logger = logging.getLogger(__name__)


class TestParsing(unittest.TestCase):

    def test_middle_page(self):

        origin = {
            'pages': {'pager': {'id': 'pager', 'nextPage': 4, 'prevPage': 2}},
            'data': [
                {'snippet': '<div><div><h2><a href="http://Okna-Veka.info/">«Окна Века» — пластиковые окна</a></h2><div><div><a href="http://Okna-Veka.info/">Okna-Veka.info</a></div><div><div><a href="http://hghltd.yandex.net/yandbtm?fmode=inject&amp;url=http%3A%2F%2FOkna-Veka.info%2F&amp;tld=ru&amp;lang=ru&amp;la=1505454848&amp;tm=1505718146&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;l10n=ru&amp;mime=html&amp;sign=3379a71668167ba0b485e7cd42ee9c22&amp;keyno=0">Сохранённая копия</a><a href="/search/?lr=213&amp;msid=1505715928.06326.22884.27682&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;noreask=1&amp;site=Okna-Veka.info">Показать ещё с сайта</a>Пожаловаться</div></div></div><div><div>Производство и монтаж пластиковых окон; остекление балконов и <wbr/>лоджий. Цены. Онлайн-калькулятор стоимости. Портфолио. Форма для <wbr/>вызова замерщика.<br/></div></div></div></div>',
                 'href': 'http://Okna-Veka.info/',
                 'title': '«Окна Века» — пластиковые окна'
                 },
                {'snippet': '<div><div><h2><a href="http://okna-petrov.ru/">Пластиковые окна в Москве от компании Петровские окна</a></h2><div><div><a href="http://okna-petrov.ru/">okna-petrov.ru</a></div><div><div><a href="http://hghltd.yandex.net/yandbtm?fmode=inject&amp;url=http%3A%2F%2Fokna-petrov.ru%2F&amp;tld=ru&amp;lang=ru&amp;la=1505482752&amp;tm=1505718146&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;l10n=ru&amp;mime=html&amp;sign=0ff372b6d20bae6050cc39e0649693a3&amp;keyno=0">Сохранённая копия</a><a href="/search/?lr=213&amp;msid=1505715928.06326.22884.27682&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;noreask=1&amp;site=okna-petrov.ru">Показать ещё с сайта</a>Пожаловаться</div></div></div><div><div>Производство и установка пластиковых окон из профилей Rehau; <wbr/>остекление балконов и лоджий под ключ. Галерея работ. Адреса офисов <wbr/>продаж.<br/></div></div></div></div>',
                 'href': 'http://okna-petrov.ru/',
                 'title': 'Пластиковые окна в Москве от компании Петровские окна'},
                {'snippet': '<div><div><h2><a href="http://www.okna-stan.ru/">Пластиковые окна в Москве и Подмосковье</a></h2><div><div><a href="http://www.okna-stan.ru/">okna-stan.ru</a></div><div><div><a href="http://hghltd.yandex.net/yandbtm?fmode=inject&amp;url=http%3A%2F%2Fwww.okna-stan.ru%2F&amp;tld=ru&amp;lang=ru&amp;la=1505466240&amp;tm=1505718146&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;l10n=ru&amp;mime=html&amp;sign=e2d6a988bf6c6fe7826378610acf6e0e&amp;keyno=0">Сохранённая копия</a><a href="/search/?lr=213&amp;msid=1505715928.06326.22884.27682&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;noreask=1&amp;site=www.okna-stan.ru">Показать ещё с сайта</a>Пожаловаться</div></div></div><div><div>Пластиковые окна в Москве от компании "Окна-СТАН". <wbr/>Работаем только с лучшим профилем KBE и Rehau. Изготовим окна разных <wbr/>размеров и форм.</div></div></div></div>',
                 'href': 'http://www.okna-stan.ru/',
                 'title': 'Пластиковые окна в Москве и Подмосковье'},
                {'snippet': '<div><div><h2><a href="http://xn----7sbf5adhmcecz.xn--p1ai/">ПЛАСТИКОВЫЕ ОКНА - Москва</a></h2><div><div><a href="http://xn----7sbf5adhmcecz.xn--p1ai/">москва-окно.рф</a></div><div><div><a href="http://hghltd.yandex.net/yandbtm?fmode=inject&amp;url=http%3A%2F%2Fxn----7sbf5adhmcecz.xn--p1ai%2F&amp;tld=ru&amp;lang=ru&amp;la=1505443584&amp;tm=1505718146&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;l10n=ru&amp;mime=html&amp;sign=6b3c32fdd3b35f3560ab041ac6e379bb&amp;keyno=0">Сохранённая копия</a><a href="/search/?lr=213&amp;msid=1505715928.06326.22884.27682&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;noreask=1&amp;site=%D0%BC%D0%BE%D1%81%D0%BA%D0%B2%D0%B0-%D0%BE%D0%BA%D0%BD%D0%BE.%D1%80%D1%84">Показать ещё с сайта</a>Пожаловаться</div></div></div><div><div>1. Производители пластиковых окон с 2001 года. 2. Пожизненная <wbr/>гарантия на окна. 3. Скидка 50% + подарок стоимостью 4 000 рублей.</div></div></div></div>',
                 'href': 'http://xn----7sbf5adhmcecz.xn--p1ai/', 'title': 'ПЛАСТИКОВЫЕ ОКНА - Москва'},
                {'snippet': '<div><div><h2><a href="http://www.EurOkna.ru/">Пластиковые окна - цены, купить пластиковые окна...</a></h2><div><div><a href="http://www.EurOkna.ru/">EurOkna.ru</a></div><div><div><a href="http://hghltd.yandex.net/yandbtm?fmode=inject&amp;url=http%3A%2F%2Fwww.EurOkna.ru%2F&amp;tld=ru&amp;lang=ru&amp;la=1505459072&amp;tm=1505718146&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;l10n=ru&amp;mime=html&amp;sign=a802cac6580b369296c5059214317b14&amp;keyno=0">Сохранённая копия</a><a href="/search/?lr=213&amp;msid=1505715928.06326.22884.27682&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;noreask=1&amp;site=www.EurOkna.ru">Показать ещё с сайта</a>Пожаловаться</div></div></div><div><div>Производство, продажа и монтаж пластиковых, алюминиевых и деревянных <wbr/>окон; остеклению балконов, коттеджей и пр. Сроки изготовления. <wbr/>Примеры работ.<br/></div></div></div></div>',
                 'href': 'http://www.EurOkna.ru/', 'title': 'Пластиковые окна - цены, купить пластиковые окна...'},
                {'snippet': '<div><div><h2><a href="http://veramo.ru/plastikovye-okna-ceny">Цены на пластиковые окна от производителя в Москве</a></h2><div><div><a href="http://veramo.ru/">veramo.ru</a>›<a href="http://veramo.ru/plastikovye-okna-ceny">plastikovye-okna-ceny</a></div><div><div><a href="http://hghltd.yandex.net/yandbtm?fmode=inject&amp;url=http%3A%2F%2Fveramo.ru%2Fplastikovye-okna-ceny&amp;tld=ru&amp;lang=ru&amp;la=1505434752&amp;tm=1505718146&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;l10n=ru&amp;mime=html&amp;sign=47fa8369ace6f90f8b1305868947af03&amp;keyno=0">Сохранённая копия</a><a href="/search/?lr=213&amp;msid=1505715928.06326.22884.27682&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;noreask=1&amp;site=veramo.ru">Показать ещё с сайта</a>Пожаловаться</div></div></div><div><div>Недорогие цены на пластиковые окна VEKA в Москве и Московской <wbr/>области от производителя. Стоимость окон из ПВХ профилей Века.</div></div></div></div>',
                 'href': 'http://veramo.ru/plastikovye-okna-ceny', 'title': 'Цены на пластиковые окна от производителя в Москве'},
                {'snippet': '<div><div><h2><a href="http://oknafamily.ru/plastikovye-okna/">Пластиковые окна</a></h2><div><div><a href="http://oknafamily.ru/">oknafamily.ru</a>›<a href="http://oknafamily.ru/plastikovye-okna/">Пластиковые окна</a></div><div><div><a href="http://hghltd.yandex.net/yandbtm?fmode=inject&amp;url=http%3A%2F%2Foknafamily.ru%2Fplastikovye-okna%2F&amp;tld=ru&amp;lang=ru&amp;la=1505435392&amp;tm=1505718146&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;l10n=ru&amp;mime=html&amp;sign=f8b9e8b9b5bea6e551002c39b077d465&amp;keyno=0">Сохранённая копия</a><a href="/search/?lr=213&amp;msid=1505715928.06326.22884.27682&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;noreask=1&amp;site=oknafamily.ru">Показать ещё с сайта</a>Пожаловаться</div></div></div><div><div>Компания «Окна Family» уже много лет изготавливает и устанавливает <wbr/>пластиковые окна в Москве и Московской области.</div></div></div></div>',
                 'href': 'http://oknafamily.ru/plastikovye-okna/', 'title': 'Пластиковые окна'},
                {'snippet': '<div><div><h2><a href="http://Okna-Alma.ru/plastikovye-okna/">Пластиковые окна цена от производителя в Москве</a></h2><div><div><a href="http://Okna-Alma.ru/">Okna-Alma.ru</a>›<a href="http://Okna-Alma.ru/plastikovye-okna/">plastikovye-okna/</a></div><div><div><a href="http://hghltd.yandex.net/yandbtm?fmode=inject&amp;url=http%3A%2F%2FOkna-Alma.ru%2Fplastikovye-okna%2F&amp;tld=ru&amp;lang=ru&amp;la=1505457664&amp;tm=1505718146&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;l10n=ru&amp;mime=html&amp;sign=a143e1ecb4cb97a14192b929c2caf35c&amp;keyno=0">Сохранённая копия</a><a href="/search/?lr=213&amp;msid=1505715928.06326.22884.27682&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;noreask=1&amp;site=Okna-Alma.ru">Показать ещё с сайта</a>Пожаловаться</div></div></div><div><div>Пластиковые окна от производителя в Москве и области. Доставка и <wbr/>монтаж в один день. Лучшие немецкие профиля на рынке у нас.</div></div></div></div>',
                 'href': 'http://Okna-Alma.ru/plastikovye-okna/', 'title': 'Пластиковые окна цена от производителя в Москве'},
                {'snippet': '<div><div><h2><a href="http://okna-ot-lidera.ru/tseni-na-okna/">Пластиковые окна ПВХ - Цена 1800р в Москве, Купить...</a></h2><div><div><a href="http://okna-ot-lidera.ru/">okna-ot-lidera.ru</a>›<a href="http://okna-ot-lidera.ru/tseni-na-okna/">Цены</a></div><div><div><a href="http://hghltd.yandex.net/yandbtm?fmode=inject&amp;url=http%3A%2F%2Fokna-ot-lidera.ru%2Ftseni-na-okna%2F&amp;tld=ru&amp;lang=ru&amp;la=1505456256&amp;tm=1505718146&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;l10n=ru&amp;mime=html&amp;sign=43a06687b1e4db96d80f13b33f9cb113&amp;keyno=0">Сохранённая копия</a><a href="/search/?lr=213&amp;msid=1505715928.06326.22884.27682&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;noreask=1&amp;site=okna-ot-lidera.ru">Показать ещё с сайта</a>Пожаловаться</div></div></div><div><div>Пластиковые окна: цены и скидки.\xa0... Компания «Лидер» предлагает купить пластиковые окна в Москве самого <wbr/>лучшего качества.</div></div></div></div>',
                 'href': 'http://okna-ot-lidera.ru/tseni-na-okna/', 'title': 'Пластиковые окна ПВХ - Цена 1800р в Москве, Купить...'},
                {'snippet': '<div><div><h2><a href="http://okna-sity.ru/">Пластиковые окна, остекление балконов и лоджий...</a></h2><div><div><a href="http://okna-sity.ru/">okna-sity.ru</a></div><div><div><a href="http://hghltd.yandex.net/yandbtm?fmode=inject&amp;url=http%3A%2F%2Fokna-sity.ru%2F&amp;tld=ru&amp;lang=ru&amp;la=1505473664&amp;tm=1505718146&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;l10n=ru&amp;mime=html&amp;sign=a8bf5d131e6ca02f5f66ba57941b63ce&amp;keyno=0">Сохранённая копия</a><a href="/search/?lr=213&amp;msid=1505715928.06326.22884.27682&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;noreask=1&amp;site=okna-sity.ru">Показать ещё с сайта</a>Пожаловаться</div></div></div><div><div>*В рамках акции действуют скидки до 50% на пластиковые окна при <wbr/>заказе от 3-х изделий с 1 сентября 2017 года по 30 ноября 2017 года.</div></div></div></div>',
                 'href': 'http://okna-sity.ru/', 'title': 'Пластиковые окна, остекление балконов и лоджий...'}
            ]
        }

        buffer = open(os.path.join(CURRENT_DIR, "files", "result3.html"), "r", encoding='UTF-8')
        parse = Parse(buffer, config_path=os.path.join(CURRENT_DIR, '..', 'config'))
        parse.make()
        buffer.close()
        self.assertEqual(parse.result, origin)

    def test_first_page(self):

        origin = {
            'pages': {'pager': {'id': 'pager', 'nextPage': 1, 'prevPage': False}},
            'data': [
                {'snippet': '<div><div><h2><div>1</div><a href="https://www.mosokna.ru/ceny-plastikovye-okna/">Пластиковые окна - цены и размеры с установкой...</a></h2><div><div><a href="https://www.mosokna.ru/">mosokna.ru</a>›<a href="https://www.mosokna.ru/ceny-plastikovye-okna/">ceny-plastikovye-okna/</a></div><div><div><a href="https://hghltd.yandex.net/yandbtm?fmode=inject&amp;url=https%3A%2F%2Fwww.mosokna.ru%2Fceny-plastikovye-okna%2F&amp;tld=ru&amp;lang=ru&amp;la=1505431040&amp;tm=1505727749&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;l10n=ru&amp;mime=html&amp;sign=185a9eb5e3b2b786fd85af96dae3deff&amp;keyno=0">Сохранённая копия</a><a href="/search/?text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;lr=213&amp;noreask=1&amp;site=www.mosokna.ru">Показать ещё с сайта</a>Пожаловаться</div></div></div><div><div>Пластиковые окна: цены с установкой. В Москве нет ни одного дома, <wbr/>где бы не были установлены Московские окна.</div></div></div></div>',
                 'href': 'https://www.mosokna.ru/ceny-plastikovye-okna/',
                 'title': 'Пластиковые окна - цены и размеры с установкой...'},
                {'snippet': '<div><div><h2><div>2</div><a href="http://www.plastika-okon.ru/">Пластиковые окна недорого в Москве - цены от...</a></h2><div><div><div><a href="http://www.plastika-okon.ru/calc.php">Рассчитать со скидкой 65%</a></div></div><div><div><a href="http://www.plastika-okon.ru/rehau.php">Пластиковые окна Rehau</a></div></div><div><div><a href="http://www.plastika-okon.ru/price.php">Оплата и цены</a></div></div></div><div><div><a href="http://www.plastika-okon.ru/">plastika-okon.ru</a></div><div><div><a href="http://hghltd.yandex.net/yandbtm?fmode=inject&amp;url=http%3A%2F%2Fwww.plastika-okon.ru%2F&amp;tld=ru&amp;lang=ru&amp;la=1505483264&amp;tm=1505727749&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;l10n=ru&amp;mime=html&amp;sign=327a064dd4bc2183ca18ff082da9a1fb&amp;keyno=0">Сохранённая копия</a><a href="/search/?text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;lr=213&amp;noreask=1&amp;site=www.plastika-okon.ru">Показать ещё с сайта</a>Пожаловаться</div></div></div><div><div>Заказывайте пластиковые окна от производителя. Недорогие окна со <wbr/>скидкой до 65% от Пластика Окон - ☎ +7(495)988-08-88.</div><div><div><a href="//yandex.ru/maps/?source=adrsnip&amp;text=www.plastika-okon.ru&amp;sll=37.620393%2C55.753960&amp;sspn=0.641442%2C0.466439"><div/>Адреса на карте</a></div></div></div></div></div>',
                 'href': 'http://www.plastika-okon.ru/',
                 'title': 'Пластиковые окна недорого в Москве - цены от...'},
                {'snippet': '<div><div><h2><div>3</div><a href="https://www.fabrikaokon.ru/okna.html">Купить пластиковые окна ПВХ в Москве – Фабрика Окон</a></h2><div><div><a href="https://www.fabrikaokon.ru/">fabrikaokon.ru</a>›<a href="https://www.fabrikaokon.ru/okna.html">Пластиковые окна</a></div><div><div><a href="https://hghltd.yandex.net/yandbtm?fmode=inject&amp;url=https%3A%2F%2Fwww.fabrikaokon.ru%2Fokna.html&amp;tld=ru&amp;lang=ru&amp;la=1505323392&amp;tm=1505727749&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;l10n=ru&amp;mime=html&amp;sign=c5adb4d2493f66f7d421b4566c52741e&amp;keyno=0">Сохранённая копия</a><a href="/search/?text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;lr=213&amp;noreask=1&amp;site=www.fabrikaokon.ru">Показать ещё с сайта</a>Пожаловаться</div></div></div><div><div>Какие окна выбрать - пластиковые, деревянные или алюминиевые? <wbr/>Пластиковые окна с климат-контролем. Как работают термоокна?</div></div></div></div>',
                 'href': 'https://www.fabrikaokon.ru/okna.html',
                 'title': 'Купить пластиковые окна ПВХ в Москве – Фабрика Окон'},
                {'snippet': '<div><div><h2><div>4</div><a href="http://www.okonti.ru/">«Оконный континент» — немецкие пластиковые окна</a></h2><div><div><a href="http://www.okonti.ru/">okonti.ru</a></div><div><div><a href="http://hghltd.yandex.net/yandbtm?fmode=inject&amp;url=http%3A%2F%2Fwww.okonti.ru%2F&amp;tld=ru&amp;lang=ru&amp;la=1505478400&amp;tm=1505727749&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;l10n=ru&amp;mime=html&amp;sign=bdfc8a064b6abbc07caaef51fd27b5ed&amp;keyno=0">Сохранённая копия</a><a href="/search/?text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;lr=213&amp;noreask=1&amp;site=www.okonti.ru">Показать ещё с сайта</a>Пожаловаться</div></div></div><div><div>Производство и установка пластиковых окон и дверей, в т.ч. и по <wbr/>индивидуальным проектам, остекление балконов и лоджий, изготовление <wbr/>витражей и пр. Фотографии готовых работ. Адреса офисов продаж.<br/></div><div><div><a href="//yandex.ru/maps/?source=adrsnip&amp;text=www.okonti.ru&amp;sll=37.620393%2C55.753960&amp;sspn=0.641442%2C0.466439"><div/>Адреса на карте</a></div></div></div></div></div>',
                 'href': 'http://www.okonti.ru/',
                 'title': '«Оконный континент» — немецкие пластиковые окна'},
                {'snippet': '<div><div><h2><div>5</div><a href="http://www.vekamoscow.ru/windows-calc/">Пластиковые окна ПВХ: калькулятор цены, стоимость...</a></h2><div><div><a href="http://www.vekamoscow.ru/">vekamoscow.ru</a>›<a href="http://www.vekamoscow.ru/windows-calc/">Калькулятор пластиковых окон</a></div><div><div><a href="http://hghltd.yandex.net/yandbtm?fmode=inject&amp;url=http%3A%2F%2Fwww.vekamoscow.ru%2Fwindows-calc%2F&amp;tld=ru&amp;lang=ru&amp;la=1505479680&amp;tm=1505727749&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;l10n=ru&amp;mime=html&amp;sign=7be955d8db3a81d7c8fd07fafdef669c&amp;keyno=0">Сохранённая копия</a><a href="/search/?text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;lr=213&amp;noreask=1&amp;site=www.vekamoscow.ru">Показать ещё с сайта</a>Пожаловаться</div></div></div><div><div>Окна цены онлайн, калькулятор расчета стоимости пластиковых окон ПВХ <wbr/>Века (Veka), размеры и цены в Москве.</div></div></div></div>',
                'href': 'http://www.vekamoscow.ru/windows-calc/',
                 'title': 'Пластиковые окна ПВХ: калькулятор цены, стоимость...'},
                {'snippet': '<div><div><h2><div>6</div><a href="http://www.ok-no.ru/zakazat-plastikovye-okna-v-moskve/">Заказать недорогие пластиковые окна в Москве...</a></h2><div><div><a href="http://www.ok-no.ru/">ok-no.ru</a>›<a href="http://www.ok-no.ru/zakazat-plastikovye-okna-v-moskve/">Пластиковые окна</a></div><div><div><a href="http://hghltd.yandex.net/yandbtm?fmode=inject&amp;url=http%3A%2F%2Fwww.ok-no.ru%2Fzakazat-plastikovye-okna-v-moskve%2F&amp;tld=ru&amp;lang=ru&amp;la=1505481216&amp;tm=1505727749&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;l10n=ru&amp;mime=html&amp;sign=a89eb6e3c61d3d270f1b21dc22dd56e2&amp;keyno=0">Сохранённая копия</a><a href="/search/?text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;lr=213&amp;noreask=1&amp;site=www.ok-no.ru">Показать ещё с сайта</a>Пожаловаться</div></div></div><div><div>Европейские пластиковые окна на заказ. Окна-ПВХ Rehau, KBE, Wintech <wbr/>любого размера, формы и цвета. Лучшее соотношение цены и качества!</div></div></div></div>',
                 'href': 'http://www.ok-no.ru/zakazat-plastikovye-okna-v-moskve/',
                 'title': 'Заказать недорогие пластиковые окна в Москве...'},
                {'snippet': '<div><div><h2><div>7</div><a href="http://msk.blizko.ru/predl/construction/building/windows/windows">Купить пластиковые окна в Москве... - на портале BLIZKO</a></h2><div><div><a href="http://msk.blizko.ru/">msk.blizko.ru</a>›<a href="http://msk.blizko.ru/predl/construction/building">Строительные материалы</a>›<a href="http://msk.blizko.ru/predl/construction/building/windows">Окна</a>›<a href="http://msk.blizko.ru/predl/construction/building/windows/windows">Окна пластиковые</a></div><div><div><a href="http://hghltd.yandex.net/yandbtm?fmode=inject&amp;url=http%3A%2F%2Fmsk.blizko.ru%2Fpredl%2Fconstruction%2Fbuilding%2Fwindows%2Fwindows&amp;tld=ru&amp;lang=ru&amp;la=1505407232&amp;tm=1505727749&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;l10n=ru&amp;mime=html&amp;sign=594ac1a5a670b04dddb5ede226d12b74&amp;keyno=0">Сохранённая копия</a><a href="/search/?text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;lr=213&amp;noreask=1&amp;site=msk.blizko.ru">Показать ещё с сайта</a>Пожаловаться</div></div></div><div><div>Чтобы аккуратно и эргономично оформить оконный проем, повысив тепло- <wbr/>и звуко-изоляцию в помещении, стоит купить пластиковые окна...</div></div></div></div>',
                 'href': 'http://msk.blizko.ru/predl/construction/building/windows/windows',
                 'title': 'Купить пластиковые окна в Москве... - на портале BLIZKO'},
                {'snippet': '<div><div><h2><div>8</div><a href="http://okna-tseny.ru/plastikovye-okna/">"Окна Цены" - пластиковые окна цены</a></h2><div><div><a href="http://okna-tseny.ru/">okna-tseny.ru</a>›<a href="http://okna-tseny.ru/plastikovye-okna/">Окна</a></div><div><div><a href="http://hghltd.yandex.net/yandbtm?fmode=inject&amp;url=http%3A%2F%2Fokna-tseny.ru%2Fplastikovye-okna%2F&amp;tld=ru&amp;lang=ru&amp;la=1505444224&amp;tm=1505727749&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;l10n=ru&amp;mime=html&amp;sign=973cfc8f2b8452bbf65f6294d12fdb51&amp;keyno=0">Сохранённая копия</a><a href="/search/?text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;lr=213&amp;noreask=1&amp;site=okna-tseny.ru">Показать ещё с сайта</a>Пожаловаться</div></div></div><div><div>Два пластиковых окна я купил в фирме «Окна Цены». Покупка по деньгам <wbr/>получилась очень доступная. Сроки выдержаны.</div></div></div></div>',
                 'href': 'http://okna-tseny.ru/plastikovye-okna/',
                 'title': '"Окна Цены" - пластиковые окна цены'},
                {'snippet': '<div><div><h2><div>9</div><a href="http://vrehau.ru/">Пластиковые окна Рехау недорого в Москве Супер цены</a></h2><div><div><a href="http://vrehau.ru/">vrehau.ru</a></div><div><div><a href="http://hghltd.yandex.net/yandbtm?fmode=inject&amp;url=http%3A%2F%2Fvrehau.ru%2F&amp;tld=ru&amp;lang=ru&amp;la=1505469312&amp;tm=1505727749&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;l10n=ru&amp;mime=html&amp;sign=03c3a881b99fd518b0d227a178882934&amp;keyno=0">Сохранённая копия</a><a href="/search/?text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;lr=213&amp;noreask=1&amp;site=vrehau.ru">Показать ещё с сайта</a>Пожаловаться</div></div></div><div><div>Уникальные свойства изделий профиля помогут нашим клиентам сделать <wbr/>правильный выбор и купить пластиковые окна недорого.</div><div><div><a href="//yandex.ru/maps/?source=adrsnip&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;sll=37.696606%2C55.778755&amp;ol=biz&amp;oid=1549009906&amp;z=14&amp;ll=37.696606%2C55.778755"><div/>Москва, Большая Почтовая улица, 55/59, оф. 812</a><div>м. Электрозаводская</div><div>+7 (495) 796-40-80</div></div></div></div></div></div>',
                 'href': 'http://vrehau.ru/',
                 'title': 'Пластиковые окна Рехау недорого в Москве Супер цены'},
                {'snippet': '<div><div><h2><div>10</div><a href="http://www.EuroOkna.ru/">«ЕвроОкна» — пластиковые окна</a></h2><div><div><a href="http://www.EuroOkna.ru/">EuroOkna.ru</a></div><div><div><a href="http://hghltd.yandex.net/yandbtm?fmode=inject&amp;url=http%3A%2F%2Fwww.EuroOkna.ru%2F&amp;tld=ru&amp;lang=ru&amp;la=1505477248&amp;tm=1505727749&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;l10n=ru&amp;mime=html&amp;sign=5bf5d53530ba57562e70835c30c3d65c&amp;keyno=0">Сохранённая копия</a><a href="/search/?text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;lr=213&amp;noreask=1&amp;site=www.EuroOkna.ru">Показать ещё с сайта</a>Пожаловаться</div></div></div><div><div>Производство и продажа пластиковых окон и стеклопакетов, остекление <wbr/>лоджий. Советы по выбору. Цены. Информация о скидках и условиях <wbr/>получения кредита.<br/></div><div><div><a href="//yandex.ru/maps/?source=adrsnip&amp;text=%D0%BF%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BA%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%B0&amp;sll=37.60302%2C55.775535&amp;ol=biz&amp;oid=1266617249&amp;z=14&amp;ll=37.60302%2C55.775535"><div/>Россия, Москва, Долгоруковская улица, 21с1</a><div>м. Новослободская</div><div>+7 (495) 258-90-00</div></div></div></div></div></div>',
                 'href': 'http://www.EuroOkna.ru/',
                 'title': '«ЕвроОкна» — пластиковые окна'}
            ]
        }

        buffer = open(os.path.join(CURRENT_DIR, "files", "result0.html"), "r", encoding='UTF-8')
        parse = Parse(buffer, config_path=os.path.join(CURRENT_DIR, '..', 'config'))
        parse.make()
        buffer.close()
        self.assertEqual(parse.result, origin)


if __name__ == '__main__':
    unittest.main()